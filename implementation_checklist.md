## 1. Prepare Environment

1. [ ] **Check Node.js installation**  
   - In your terminal, run:
     ```bash
     node -v
     ```
   - If Node.js is not installed, or if it's older than Node.js 16.x, install the latest LTS (16.x or higher) from [Node.js official site](https://nodejs.org/).  
   - Verify installation again:
     ```bash
     node -v
     ```

2. [ ] **Check npm installation**  
   - Run:
     ```bash
     npm -v
     ```
   - If npm is missing, install it (it usually comes with Node.js).  
   - Verify installation again:
     ```bash
     npm -v
     ```

3. [ ] **Check Yarn installation (optional, but recommended)**  
   - Run:
     ```bash
     yarn -v
     ```
   - If Yarn is not installed, install it:
     ```bash
     npm install --global yarn
     ```
   - Verify installation again:
     ```bash
     yarn -v
     ```

4. [ ] **Check AWS CLI installation**  
   - Run:
     ```bash
     aws --version
     ```
   - If AWS CLI is not installed, follow official instructions: [AWS CLI Installation](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html).  
   - Verify installation again:
     ```bash
     aws --version
     ```

5. [ ] **Configure AWS CLI**  
   - Run:
     ```bash
     aws configure
     ```
   - Provide your AWS Access Key, AWS Secret Key, AWS region, and output format (e.g., `json`) when prompted.  
   - Verify credentials by listing S3 buckets (this step ensures you have valid credentials):
     ```bash
     aws s3 ls
     ```
   - If it succeeds (or shows an empty list if you have none), your credentials are configured.

6. [ ] **Check Docker installation**  
   - Run:
     ```bash
     docker -v
     ```
   - If Docker is not installed, install it from [Docker’s official site](https://docs.docker.com/get-docker/).  
   - Verify Docker by running:
     ```bash
     docker run hello-world
     ```
   - Ensure it outputs a “Hello from Docker!” message.

---

## 2. Initialize Project

7. [ ] **Create and navigate into an empty project directory**  
   ```bash
   mkdir my-awesome-project
   cd my-awesome-project
   ```
   - Replace `my-awesome-project` with the name of your choice.

8. [ ] **Initialize a new Git repository**  
   ```bash
   git init
   ```
   - Verify `.git/` is created.

9. [ ] **Initialize a new Next.js app**  
   - Assuming Next.js 14 is available; adjust if the command changes by that time.
   ```bash
   npx create-next-app@latest --experimental-app my-awesome-project-template
   ```
   - If the CLI prompts you for various configuration choices, select the defaults for now.  
   - Once complete, verify:
     ```bash
     ls
     ```
     - You should see typical Next.js files: `pages`, `styles`, `package.json`, etc.  
   - Delete or rename default Next.js files/folders you won’t need (like `pages`, if you’re solely using the `/app` directory). We will reorganize soon.

10. [ ] **Add `.gitignore` file if not already present**  
   - Check whether `.gitignore` is generated by `create-next-app`. If missing:
     ```bash
     touch .gitignore
     ```
   - Update `.gitignore` with standard Node/Next.js ignores:
     ```bash
     echo "node_modules
.next
out
.env
*.log
" >> .gitignore
     ```
   - **Update relevant markdown doc**: Since this is the root directory, update `README.md` in the root (we’ll create it soon in a later step).

---

## 3. Create the Required Directory Structure

We will methodically create the directories. Each time you create or modify a directory or file, remember to update the relevant `README.md`.

11. [ ] **Create top-level directories**  
   - In your terminal:
     ```bash
     mkdir -p .github/workflows
     mkdir -p .vscode
     mkdir -p amplify/backend/{api,auth,storage,function}
     mkdir -p amplify/hooks
     mkdir -p infrastructure/terraform/environments/{dev,prod}
     mkdir -p infrastructure/terraform/modules/{rds,s3,api-gateway,lambda}
     mkdir -p infrastructure/docker
     mkdir -p src/app/(auth)/{login,register}
     mkdir -p src/app/api/websocket
     mkdir -p src/app/api
     mkdir -p src/app
     mkdir -p src/components/{ui,forms,layouts}
     mkdir -p src/config
     mkdir -p src/lib/store
     mkdir -p src/lib/utils
     mkdir -p src/lib
     mkdir -p src/styles
     mkdir -p src/types
     mkdir -p prisma/migrations
     mkdir -p lambda/websocket
     mkdir -p scripts
     mkdir -p tests/{e2e,integration,unit}
     ```
   - Verify each directory was created (e.g., `ls -R` or manually check).

12. [ ] **Create top-level files**  
   - In your terminal:
     ```bash
     touch .dockerignore
     touch .env.example
     touch .eslintrc.js
     touch amplify.yml
     touch next.config.js
     touch package.json
     touch README.md
     touch tailwind.config.js
     touch tsconfig.json
     ```
   - We will fill in contents step by step.  
   - Verify files:
     ```bash
     ls -1
     ```
     - Ensure each file is listed.

13. [ ] **Create `.github/workflows` files**  
   ```bash
   touch .github/workflows/ci.yml
   touch .github/workflows/README.md
   ```
   - Verify:
     ```bash
     ls -1 .github/workflows
     ```
     - Make sure `ci.yml` and `README.md` are there.

14. [ ] **Create `.vscode` files**  
   ```bash
   touch .vscode/settings.json
   touch .vscode/README.md
   ```
   - Verify:
     ```bash
     ls -1 .vscode
     ```

15. [ ] **Create `amplify/README.md`**  
   ```bash
   touch amplify/README.md
   ```
   - Verify the file exists.

16. [ ] **Create `infrastructure/README.md` and subdirectories' README.md**  
   ```bash
   touch infrastructure/README.md
   touch infrastructure/terraform/README.md
   touch infrastructure/terraform/environments/dev/main.tf
   touch infrastructure/terraform/environments/prod/main.tf
   touch infrastructure/terraform/modules/rds/README.md
   touch infrastructure/terraform/modules/s3/README.md
   touch infrastructure/terraform/modules/api-gateway/README.md
   touch infrastructure/terraform/modules/lambda/README.md
   touch infrastructure/docker/README.md
   touch infrastructure/docker/Dockerfile.dev
   touch infrastructure/docker/docker-compose.yml
   ```
   - Verify each file’s existence.

17. [ ] **Create `src/app` related files**  
   ```bash
   touch src/app/(auth)/login/page.tsx
   touch src/app/(auth)/register/page.tsx
   touch src/app/(auth)/README.md
   touch src/app/api/websocket/route.ts
   touch src/app/api/README.md
   touch src/app/layout.tsx
   touch src/app/page.tsx
   touch src/app/README.md
   ```
   - Verify each file.

18. [ ] **Create `src/components` README and subdirectories**  
   ```bash
   touch src/components/README.md
   mkdir -p src/components/ui
   mkdir -p src/components/forms
   mkdir -p src/components/layouts
   ```
   - (We already created these directories in a prior step, but double-check they exist.)
   - Verify: `ls -R src/components`

19. [ ] **Create `src/config` files**  
   ```bash
   touch src/config/auth.ts
   touch src/config/aws.ts
   touch src/config/README.md
   ```

20. [ ] **Create `src/lib` subdirectories’ README and structure**  
   ```bash
   touch src/lib/README.md
   touch src/lib/store/README.md
   touch src/lib/utils/README.md
   ```
   - Verify directories and files.

21. [ ] **Create `src/styles` files**  
   ```bash
   touch src/styles/globals.css
   ```
   - Verify file.

22. [ ] **Create `src/types/README.md`**  
   ```bash
   touch src/types/README.md
   ```

23. [ ] **Create `prisma` files**  
   ```bash
   touch prisma/schema.prisma
   touch prisma/README.md
   ```
   - Migrations folder already created. Verify all exist.

24. [ ] **Create `lambda` files**  
   ```bash
   touch lambda/README.md
   touch lambda/websocket/connect.ts
   touch lambda/websocket/disconnect.ts
   touch lambda/websocket/message.ts
   ```
   - Verify these files.

25. [ ] **Create `scripts` files**  
   ```bash
   touch scripts/deploy.sh
   touch scripts/setup-local.sh
   touch scripts/README.md
   ```
   - Verify.

26. [ ] **Create `tests` README**  
   ```bash
   touch tests/README.md
   ```
   - Subfolders exist. Verify.

---

## 4. Set Up Markdown Documentation

Now that the skeleton is in place, we’ll add basic content to each `README.md`. We need to ensure each folder’s README references subdirectories' docs and includes relevant information.

> **Important**: In the interest of brevity, the steps below will show how to add minimal boilerplate content. For your real project, expand as needed.

27. [ ] **Root `README.md`**  
   - Open `README.md` in an editor or via terminal:
     ```bash
     nano README.md
     ```
   - Add a high-level project overview and a tree of all sub-READMEs:
     ```md
     # Project Overview

     This is the main documentation for the project. Below is a tree of the documentation for all subdirectories:

     - [.github/workflows](.github/workflows/README.md)
     - [.vscode](.vscode/README.md)
     - [amplify](amplify/README.md)
     - [infrastructure](infrastructure/README.md)
     - [src/app](src/app/README.md)
     - [src/components](src/components/README.md)
     - [src/config](src/config/README.md)
     - [src/lib](src/lib/README.md)
     - [src/styles](src/styles)
     - [src/types](src/types/README.md)
     - [prisma](prisma/README.md)
     - [lambda](lambda/README.md)
     - [scripts](scripts/README.md)
     - [tests](tests/README.md)

     (Include more content as your project evolves.)
     ```
   - Save and exit.  
   - Verify file contents:
     ```bash
     cat README.md
     ```

28. [ ] **Update each subdirectory README**  
   - For example, `.github/workflows/README.md`:
     ```bash
     nano .github/workflows/README.md
     ```
     ```md
     # CI/CD Workflow Documentation

     This folder contains GitHub Actions workflows (e.g., `ci.yml`).  
     ```
   - Repeat for each README you created, adding short explanations and references to sub-READMEs beneath it (if any).  
   - Example for `src/app/README.md`:
     ```bash
     nano src/app/README.md
     ```
     ```md
     # App Router Documentation

     This folder uses the Next.js App Router. The subfolders are:
     - **(auth)**: Contains login and register pages.
     - **api**: Contains API routes, including the `websocket` route.

     See sub-README files for more details:

     - [(auth)]((auth)/README.md) - Authentication routes
     - [api](api/README.md) - API routes
     ```
   - Continue similarly for all.  
   - **Verify** each file after editing:
     ```bash
     cat <FILENAME>
     ```

---

## 5. Install and Configure Dependencies

We’ll install dependencies in small batches.

29. [ ] **Navigate to project root**  
   ```bash
   cd path/to/my-awesome-project
   ```

30. [ ] **Initialize npm if needed**  
   - Check if `package.json` has dependencies from `create-next-app`. If it’s empty:
     ```bash
     npm init -y
     ```
   - Verify the content:
     ```bash
     cat package.json
     ```

31. [ ] **Install React, ReactDOM, Next**  
   - (Likely done by `create-next-app`, but if not):
     ```bash
     npm install react react-dom next
     ```
   - Verify:
     ```bash
     cat package.json | grep react
     ```

32. [ ] **Install Tailwind CSS**  
   ```bash
   npm install -D tailwindcss postcss autoprefixer
   npx tailwindcss init -p
   ```
   - This will create `tailwind.config.js` and `postcss.config.js`.  
   - Adjust your `tailwind.config.js` if needed.  
   - In `globals.css` (at `src/styles/globals.css`), add:
     ```css
     @tailwind base;
     @tailwind components;
     @tailwind utilities;
     ```
   - **Update relevant markdown docs**: In `src/styles/README.md` (if you choose to create it), or in `src/app/README.md` to note that Tailwind is configured.

33. [ ] **Install shadcn/ui**  
   - Steps may vary, but typically:
     ```bash
     npm install @shadcn/ui
     ```
   - **Update relevant markdown**: e.g. `src/components/README.md` to reference usage of shadcn/ui.

34. [ ] **Install Prisma** (for local dev)  
   ```bash
   npm install prisma @prisma/client
   npx prisma init
   ```
   - This will create a `.env` file and `prisma/schema.prisma` if not already present.  
   - **Check** if `prisma/schema.prisma` was overwritten. If so, merge your custom content.  
   - **Update relevant markdown**: `prisma/README.md` to outline your schema.

35. [ ] **Install Zustand** (state management)  
   ```bash
   npm install zustand
   ```
   - **Update** `src/lib/store/README.md` with relevant info.

36. [ ] **Install React Hook Form + Zod**  
   ```bash
   npm install react-hook-form zod
   ```
   - **Update** `src/components/forms/README.md` or `src/lib/utils/README.md` with usage instructions.

37. [ ] **Install Auth0 Next.js SDK**  
   ```bash
   npm install @auth0/nextjs-auth0
   ```
   - **Update** `src/config/auth.ts` to configure your Auth0 domain, client ID, etc.  
   - **Update** `src/config/README.md`.

38. [ ] **AWS Amplify CLI**  
   - Already have AWS CLI. Now install Amplify CLI globally if needed:
     ```bash
     npm install -g @aws-amplify/cli
     ```
   - Verify:
     ```bash
     amplify -v
     ```
   - **Initialize Amplify** (in your project folder):
     ```bash
     amplify init
     ```
   - Follow the prompts.  
   - **Update** `amplify/README.md`.

39. [ ] **Terraform**  
   - Check if Terraform is installed:
     ```bash
     terraform -version
     ```
   - If not, install from [Terraform Downloads](https://developer.hashicorp.com/terraform/downloads).  
   - **Update** `infrastructure/terraform/README.md`.

40. [ ] **Configure Docker**  
   - Adjust `infrastructure/docker/Dockerfile.dev` and `docker-compose.yml` as needed for local environment.  
   - **Update** `infrastructure/docker/README.md`.

---

## 6. Configure Next.js Project Files

41. [ ] **Set up `next.config.js`**  
   - Open it:
     ```bash
     nano next.config.js
     ```
   - Example minimal config:
     ```js
     /** @type {import('next').NextConfig} */
     const nextConfig = {
       reactStrictMode: true,
       experimental: {
         appDir: true,
       },
     };

     module.exports = nextConfig;
     ```
   - Save and verify:
     ```bash
     cat next.config.js
     ```
   - **Update** root `README.md` or `src/app/README.md` referencing your Next.js config.

---

## 7. AWS Infrastructure (Terraform + Amplify)

42. [ ] **Terraform for RDS, S3, API Gateway, Lambda**  
   - Go to `infrastructure/terraform/environments/dev/main.tf`:
     ```bash
     nano infrastructure/terraform/environments/dev/main.tf
     ```
   - Example skeleton:
     ```hcl
     provider "aws" {
       region = "us-east-1"
     }

     module "rds" {
       source = "../../modules/rds"
       # pass variables
     }

     module "s3" {
       source = "../../modules/s3"
       # pass variables
     }

     module "api_gateway" {
       source = "../../modules/api-gateway"
       # pass variables
     }

     module "lambda" {
       source = "../../modules/lambda"
       # pass variables
     }
     ```
   - **Update** each module’s `README.md` with instructions on how the module is used.  
   - **Repeat** for `prod/main.tf`.

43. [ ] **Amplify set up**  
   - In the root directory, check `amplify.yml`.  
   - Minimal example:
     ```yaml
     version: 1
     frontend:
       phases:
         preBuild:
           commands:
             - yarn install
         build:
           commands:
             - yarn build
       artifacts:
         baseDirectory: .next
         files:
           - '**/*'
       cache:
         paths:
           - node_modules/**/*
     ```
   - **Update** `amplify/README.md` to explain how amplify.yml is structured.

44. [ ] **Create and configure S3 bucket for file storage**  
   - In `infrastructure/terraform/modules/s3/main.tf` or similar:
     ```bash
     nano infrastructure/terraform/modules/s3/README.md
     ```
     - Document your approach, e.g.:
       ```md
       # S3 Module

       This module creates an S3 bucket for file storage. Usage:
       ```
   - Then in `infrastructure/terraform/environments/dev/main.tf`, pass the required variables.  
   - **Update** `src/config/aws.ts` with the S3 bucket name reference, if needed.

---

## 8. AWS Lambda + WebSockets Setup

45. [ ] **Implement Lambda handlers**  
   - Fill in `lambda/websocket/connect.ts`, `lambda/websocket/disconnect.ts`, `lambda/websocket/message.ts`. For example:
     ```ts
     export const handler = async (event: any) => {
       console.log("Connect function triggered", event);
       return {
         statusCode: 200,
         body: 'Connected.',
       };
     };
     ```
   - **Update** `lambda/README.md`.

46. [ ] **Zip or bundle your Lambda functions**  
   - In a terminal:
     ```bash
     cd lambda/websocket
     zip connect.zip connect.ts
     zip disconnect.zip disconnect.ts
     zip message.zip message.ts
     cd -
     ```
   - **Update** `lambda/README.md` to explain this packaging process.

47. [ ] **Reference zipped Lambdas in Terraform**  
   - In `infrastructure/terraform/modules/lambda/README.md`, document how to configure your Lambda deployment from the zipped code.  
   - In `infrastructure/terraform/environments/dev/main.tf` under module `lambda`, specify:
     ```hcl
     module "lambda" {
       source = "../../modules/lambda"
       # variable "connect_zip" = ...
       # variable "disconnect_zip" = ...
       # variable "message_zip" = ...
     }
     ```

48. [ ] **Wire up the WebSocket in API Gateway**  
   - In `infrastructure/terraform/modules/api-gateway/README.md`, document how you configure the WebSocket, integration with your Lambdas, etc.  
   - For example, you might have:
     ```hcl
     resource "aws_apigatewayv2_api" "websocket_api" {
       name            = "my-websocket-api"
       protocol_type   = "WEBSOCKET"
       route_selection_expression = "$request.body.action"
     }
     ```
   - **Update** `src/app/api/websocket/README.md` or `src/app/api/README.md` to clarify how the route is used.

---

## 9. Configure Database (RDS) and Prisma

49. [ ] **Configure RDS**  
   - In `infrastructure/terraform/modules/rds/README.md`, add instructions for provisioning a Postgres/MySQL instance, etc.  
   - Update `infrastructure/terraform/environments/dev/main.tf` with the correct variables for the RDS module.

50. [ ] **Prisma .env**  
   - After RDS is created, put the connection URL in `.env.example`:
     ```dotenv
     DATABASE_URL="postgresql://username:password@host:5432/dbname"
     ```
   - Copy `.env.example` to `.env` (for local dev):
     ```bash
     cp .env.example .env
     ```
   - Verify contents:
     ```bash
     cat .env
     ```
   - **Update** `prisma/README.md` to note the environment variable usage.

51. [ ] **Test Prisma connection**  
   ```bash
   npx prisma db pull
   ```
   - If successful, your `schema.prisma` should update with the remote DB schema.  
   - **Update** `prisma/README.md` with any new schema details.

---

## 10. Finalize Local Development Setup

52. [ ] **Set up `scripts/setup-local.sh`**  
   - Populate it with steps to spin up Docker containers, run migrations, etc.:
     ```bash
     nano scripts/setup-local.sh
     ```
     ```bash
     #!/usr/bin/env bash
     echo "Setting up local environment..."
     # e.g.:
     docker-compose -f infrastructure/docker/docker-compose.yml up -d
     npx prisma migrate dev
     ```
   - Make it executable:
     ```bash
     chmod +x scripts/setup-local.sh
     ```
   - **Update** `scripts/README.md`.

53. [ ] **Run local development**  
   - Start Docker-based services (if any):
     ```bash
     docker-compose -f infrastructure/docker/docker-compose.yml up -d
     ```
   - Then run Next.js dev server:
     ```bash
     npm run dev
     ```
   - Open browser at `http://localhost:3000`. Verify the app loads with no errors.

---

## 11. Prepare Deployment

54. [ ] **Amplify push**  
   - If you haven’t already:
     ```bash
     amplify add hosting
     amplify push
     ```
   - Follow the prompts to set up hosting. This step may differ based on your AWS account.

55. [ ] **Check the Amplify console**  
   - In your terminal (or AWS Console):
     ```bash
     amplify console
     ```
   - Verify your app and run test deployments.

56. [ ] **Terraform apply**  
   - For your dev environment:
     ```bash
     cd infrastructure/terraform/environments/dev
     terraform init
     terraform plan
     terraform apply
     ```
   - Verify that RDS, S3, Lambdas, and API Gateway are created successfully.

---

## 12. CI/CD Configuration

57. [ ] **Configure GitHub Actions**  
   - Edit `.github/workflows/ci.yml` to run lint checks, tests, and deploy steps (if you want). Minimal example:
     ```yaml
     name: CI

     on: [push]

     jobs:
       build:
         runs-on: ubuntu-latest
         steps:
           - uses: actions/checkout@v2
           - name: Install Dependencies
             run: npm install
           - name: Lint
             run: npm run lint
           - name: Build
             run: npm run build
     ```
   - **Update** `.github/workflows/README.md`.

---

## 13. Verify Everything

58. [ ] **Check your app**  
   - Confirm all directories match the desired structure.  
   - Confirm you can run `npm run dev` locally without errors.  
   - Confirm you can deploy to Amplify successfully.

59. [ ] **Check documentation**  
   - Ensure each `README.md` is up to date and references subdirectory docs.  
   - Root `README.md` should contain a project overview and a list of sub-README files.

60. [ ] **Commit and push to remote**  
   - Stage all files:
     ```bash
     git add .
     git commit -m "Initial project template"
     git push origin main
     ```
   - This ensures your code is backed up and ready for collaboration.

---

## 14. Conclusion

You now have:
- A Next.js 14 App Router project with TailwindCSS and shadcn/ui.
- Auth0 integration stubs.
- An RDS database (via Terraform).
- Real-time communication with AWS Lambda + API Gateway WebSockets.
- S3 for file storage.
- Zustand, React Hook Form, and Zod for state management and forms.
- Docker + Prisma for local dev.
- AWS Amplify for deployment.
- A multi-layered directory structure with extensive README.md documentation.

Continue filling in and refining each piece as your application logic evolves. The skeleton is ready and should work locally and in production!

